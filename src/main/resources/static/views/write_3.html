<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../src/css/shared.css">
    <link rel="stylesheet" href="../src/css/review_page.css">
    <link rel="stylesheet" href="../src/css/write_review.css">
    <script src="../src/js/lang.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>기업 리뷰하기</title>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="/main" style="text-decoration: none">
                <span class="logo">
                    <img src="../src/assets/logo.png" alt="logo" />
                    <h1 id="site_title" class="notranslate">Networker</h1>
                </span>
            </a>
            <div class="menu">
                <a href="/main" id="menu_home">홈</a>
                <a href="/views/news.html" id="menu_news">정보</a>
                <a href="/post/list" id="menu_board">자유게시판</a>
                <a href="/views/store.html" id="menu_store">스토어</a>
                <a href="/lawsupport/main" id="menu_law">법률지원</a>
                <a href="/views/review.html" id="menu_review">기업리뷰</a>
            </div>
            <div class="auth-buttons">
                <a href="/views/login.html" id="login">로그인</a>
                <a href="/views/signup.html" id="signup">회원가입</a>
                <div class="profile-icon">
                    <a href="/views/profile.html">
                        <img src="../src/assets/profile.png" alt="Profile" />
                    </a>
                </div>
                <div class="language-selector">
                    <img src="../src/assets/earth_icon.png" alt="earth" class="earth-icon" />
                    <label for="languageSelector"></label>
                    <select id="languageSelector">
                        <option value="en">English</option>
                        <option value="ko" selected>한국어</option>
                        <option value="zh">中文</option>
                        <option value="ja">日本語</option>
                        <option value="vi">Tiếng Việt</option>
                        <option value="mn">Монгол</option>
                        <option value="uk">українська мова</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section class="review-form">
            <h2 class="write_company_review_heading">기업 리뷰 작성</h2>
            <form id="reviewForm" action="/submit_review" method="POST">
                <div class="form-group">
                    <label for="headline" class="headline_label">회사에 대한 한줄 평</label>
                    <input type="text" id="headline" name="headline" class="headline_input" placeholder="한 줄 평을 입력하세요" required>
                </div>
                <div class="form-group">
                    <label for="pros" class="pros_label">장점</label>
                    <textarea id="pros" name="pros" class="pros_input" placeholder="회사의 장점을 작성하세요" required></textarea>
                </div>
                <div class="form-group">
                    <label for="cons" class="cons_label">단점</label>
                    <textarea id="cons" name="cons" class="cons_input" placeholder="회사의 단점을 작성하세요" required></textarea>
                </div>
                <div class="form-group">
                    <label for="rating" class="rating_label">별점</label>
                    <input type="hidden" id="rating" name="rating" value="0"> <!-- hidden input for rating -->
                    <div class="star_rating">
                        <span class="star" value="1"></span>
                        <span class="star" value="2"></span>
                        <span class="star" value="3"></span>
                        <span class="star" value="4"></span>
                        <span class="star" value="5"></span>
                    </div>
                </div>
                <div class="form-group">
                    <button type="submit" class="submit_review_button">리뷰 제출</button>
                </div>
            </form>
        </section>          
    </main>

    <footer>
        <div class="footer-container">
            <ul class="footer-btn">
                <li><a href="#" id="footer_terms">이용약관</a></li>
                <li>
                    <a href="/views/Privacy_Policy.html" id="footer_privacy" style="font-weight: bold">개인정보처리방침</a>
                </li>
                <li><a href="/views/inquire.html" id="footer_contact">문의/신고</a></li>
                <li><a href="/views/inquire.html" id="footer_ads">광고안내</a></li>
            </ul>
        </div>
    </footer>

    <script>
               document.addEventListener('DOMContentLoaded', function () {
            const stars = document.querySelectorAll('.star_rating .star');
            const ratingInput = document.getElementById('rating');
            let selectedRating = 0;

            stars.forEach(star => {
                star.addEventListener('click', function () {
                    stars.forEach(s => s.classList.remove('on'));
                    this.classList.add('on');
                    let prevSibling = this.previousElementSibling;
                    while (prevSibling) {
                        prevSibling.classList.add('on');
                        prevSibling = prevSibling.previousElementSibling;
                    }
                    selectedRating = this.getAttribute('value');
                    ratingInput.value = selectedRating; // set the hidden input value
                });
            });

            const reviewForm = document.getElementById('reviewForm');
            reviewForm.addEventListener('submit', function (event) {
                event.preventDefault();
                const headline = document.getElementById('headline').value;
                const pros = document.getElementById('pros').value;
                const cons = document.getElementById('cons').value;

                const review = {
                    headline,
                    pros,
                    cons,
                    rating: selectedRating,
                    date: new Date().toLocaleDateString(),
                    companyId: 'future-solutions' // 퓨처 솔루션즈의 ID
                };

                let reviews = JSON.parse(localStorage.getItem('reviews')) || [];
                reviews = reviews.filter(review => review.companyId !== 'future-solutions'); // 기존 퓨처 솔루션즈 리뷰 제거
                reviews.push(review);
                localStorage.setItem('reviews', JSON.stringify(reviews));

                alert('리뷰가 제출되었습니다.');
                window.location.href = 'company3.html'; // 리뷰 후 퓨처 솔루션즈 페이지로 이동
            });
        });
    </script>
</body>
</html>
